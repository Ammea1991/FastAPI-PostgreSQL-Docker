version: 1.0
service:
  name: my-fastapi-service
  sourceConfiguration:
    imageRepository:
      imageIdentifier: 241759873015.dkr.ecr.eu-central-1.amazonaws.com/my-fastapi-app:latest
      imageConfiguration:
        port: 8000
      imageRepositoryType: ECR
  instanceConfiguration:
    cpu: 1024
    memory: 2048
  autoScalingConfiguration:
    maxConcurrency: 100
    minSize: 1
    maxSize: 5
  healthCheckConfiguration:
    protocol: HTTP
    path: /health
    interval: 5
    timeout: 2
    healthyThreshold: 2
    unhealthyThreshold: 2
  environment:
    variables:
      - name: ENV_VAR_NAME
        value: ENV_VAR_VALUE
