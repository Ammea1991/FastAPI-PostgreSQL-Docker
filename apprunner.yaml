version: 1.0
service:
  name: personalised-nudges-service
  sourceConfiguration:
    imageRepository:
      imageIdentifier: 241759873015.dkr.ecr.eu-central-1.amazonaws.com/my-fastapi-app:latest
      imageConfiguration:
        port: 80
      imageRepositoryType: ECR
  instanceConfiguration:
    cpu: 1024
    memory: 2048
  autoScalingConfiguration:
    maxConcurrency: 100
    minSize: 1
    maxSize: 5
  healthCheckConfiguration:
    protocol: HTTP
    path: /
    interval: 10
    timeout: 5
    healthyThreshold: 2
    unhealthyThreshold: 2
  environment:
    variables:
      - name: POSTGRES_USER
        value: ameazza
      - name: POSTGRES_PASSWORD
        value: password
      - name: POSTGRES_DB
        value: nudges
